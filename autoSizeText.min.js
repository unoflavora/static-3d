!function(f){f.fn.textfill=function(i){var r=f.extend({debug:!1,maxFontPixels:40,minFontPixels:4,innerTag:"span",widthOnly:!1,success:null,fail:null,complete:null,explicitWidth:null,explicitHeight:null,changeLineHeight:!1,truncateOnFail:!1,allowOverflow:!1},i);function c(){r.debug&&"undefined"!=typeof console&&void 0!==console.debug&&console.debug.apply(console,arguments)}function u(i,e,t,n,l,s){function h(i,e){var t=" / ";return e<i?t=" > ":i==e&&(t=" = "),t}c("[TextFill] "+i+" { font-size: "+e.css("font-size")+",Height: "+e.height()+"px "+h(e.height(),t)+t+"px,Width: "+e.width()+h(e.width(),n)+n+",minFontPixels: "+l+"px, maxFontPixels: "+s+"px }")}function x(i,e,t,n,l,s,h,o){for(u(i,e,l,s,h,o);h<Math.floor(o)-1;){var a=Math.floor((h+o)/2);e.css("font-size",a);var r=t.call(e);if(r<=n){if(h=a,r==n)break}else o=a;u(i,e,l,s,h,o)}return e.css("font-size",o),t.call(e)<=n&&u(i+"* ",e,l,s,h=o,o),h}return c("[TextFill] Start Debug"),this.each(function(){var i=f(this),e=f(this).parent();if(c("[TextFill] Inner text: "+i.text()),c("[TextFill] All options: ",r),c("[TextFill] Maximum sizes: { Height: "+t+"px, Width: "+n+"px }"),!i.is(":visible"))return r.fail&&r.fail(this),void c("[TextFill] Failure { Current Width: "+i.width()+", Maximum Width: "+n+", Current Height: "+i.height()+", Maximum Height: "+t+" }");var t=r.explicitHeight||e.height(),n=r.explicitWidth||e.width(),l=i.css("font-size"),s=parseFloat(i.css("line-height"))/parseFloat(l),h=r.minFontPixels,o=r.maxFontPixels<=0?t:r.maxFontPixels,a=void 0;r.widthOnly?i.css("white-space","nowrap"):a=x("Height",i,f.fn.height,t,t,n,h,o);e=void 0,e=x("Width",i,f.fn.width,n,t,n,h,o);r.widthOnly?(i.css({"font-size":e}),r.changeLineHeight&&i.parent().css("line-height",s*e+"px")):(e=Math.min(a,e),i.css("font-size",e),r.changeLineHeight&&i.parent().css("line-height",s*e+"px")),c("[TextFill] Finished { Old font-size: "+l+", New font-size: "+i.css("font-size")+" }"),i.width()>n&&!r.allowOverflow||i.height()>t&&!r.widthOnly&&!r.allowOverflow?(i.css("font-size",l),r.fail&&r.fail(this),c("[TextFill] Failure { Current Width: "+i.width()+", Maximum Width: "+n+", Current Height: "+i.height()+", Maximum Height: "+t+" }")):r.success&&r.success(this)}),r.complete&&r.complete(this),c("[TextFill] End Debug"),this}}("undefined"!=typeof module&&module.exports?require("jquery"):window.jQuery);
